{"ast":null,"code":"\"use strict\";\n\nvar __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorPanel = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar styled_components_1 = __importDefault(require(\"styled-components\"));\n\nvar pubsub_js_1 = __importDefault(require(\"pubsub-js\"));\n\nvar react_client_1 = require(\"@speechly/react-client\");\n\nvar types_1 = require(\"../types\");\n\nvar ErrorDiv = styled_components_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  box-sizing: border-box;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  background-color: white;\\n  z-index: 51;\\n  user-select: none;\\n  pointer-events: all;\\n  color: black;\\n  display: flex;\\n  box-shadow: 0 0 8px #00000040;\\n  flex-direction: row;\\n\"], [\"\\n  box-sizing: border-box;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  background-color: white;\\n  z-index: 51;\\n  user-select: none;\\n  pointer-events: all;\\n  color: black;\\n  display: flex;\\n  box-shadow: 0 0 8px #00000040;\\n  flex-direction: row;\\n\"])));\nvar ErrorLeft = styled_components_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  box-sizing: border-box;\\n  height: 100%;\\n  width: 2rem;\\n  background-color: red;\\n  padding: 0.2rem 0.2rem;\\n  color: #ffffff;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: start;\\n  font-size: 1.5rem;\\n\"], [\"\\n  box-sizing: border-box;\\n  height: 100%;\\n  width: 2rem;\\n  background-color: red;\\n  padding: 0.2rem 0.2rem;\\n  color: #ffffff;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: start;\\n  font-size: 1.5rem;\\n\"])));\nvar ErrorRight = styled_components_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  background-color: white;\\n  padding: 1rem 3rem 1rem 1rem;\\n  overflow: auto;\\n\"], [\"\\n  background-color: white;\\n  padding: 1rem 3rem 1rem 1rem;\\n  overflow: auto;\\n\"])));\nvar H1 = styled_components_1.default.h1(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  font-size: 1.5rem;\\n  margin: 0;\\n  padding: 0 0 0.5rem 0;\\n\"], [\"\\n  font-size: 1.5rem;\\n  margin: 0;\\n  padding: 0 0 0.5rem 0;\\n\"])));\nvar P = styled_components_1.default.p(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  margin: 0;\\n  padding: 0 0 0.5rem 0;\\n  color: #999;\\n\"], [\"\\n  margin: 0;\\n  padding: 0 0 0.5rem 0;\\n  color: #999;\\n\"])));\nvar A = styled_components_1.default.a(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  color: #000;\\n\"], [\"\\n  color: #000;\\n\"])));\nvar HttpsRequired = 'HttpsRequired';\n\nvar isLocalHost = function (hostname) {\n  return !!(hostname === 'localhost' || hostname === '[::1]' || hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/) !== null);\n};\n/**\n * An optional dismissable React component that renders an error message if something\n * prevents Speechly SDK from functioning. It also provides recovery instructions.\n * <ErrorPanel> responds to <PushToTalkButton> presses so it needs to exist somewhere in the component hierarchy.\n *\n * It is intented to be displayed at the lower part of the screen like so:\n * <PushToTalkButtonContainer><ErrorPanel/><PushToTalkButton/><PushToTalkButtonContainer>.\n *\n * @public\n */\n\n\nvar ErrorPanel = function (props) {\n  var _a = react_1.useState(null),\n      visible = _a[0],\n      setVisible = _a[1];\n\n  react_1.useEffect(function () {\n    var subTangentClick = pubsub_js_1.default.subscribe(types_1.SpeechlyUiEvents.TangentRelease, function (message, payload) {\n      var _a;\n\n      switch (payload.state) {\n        case react_client_1.SpeechState.NoAudioConsent:\n        case react_client_1.SpeechState.NoBrowserSupport:\n          // Provide special instructions for non-https access\n          if (((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.protocol) !== 'https:' && !isLocalHost(window.location.hostname)) {\n            setVisible(HttpsRequired);\n            break;\n          }\n\n          setVisible(payload.state);\n          break;\n\n        default:\n          break;\n      }\n    });\n    return function () {\n      pubsub_js_1.default.unsubscribe(subTangentClick);\n    };\n  }, []);\n  if (visible === null) return null;\n  return react_1.default.createElement(ErrorDiv, null, react_1.default.createElement(ErrorLeft, {\n    onClick: function () {\n      return setVisible(null);\n    }\n  }, \"\\u00D7\"), visible === react_client_1.SpeechState.NoAudioConsent && react_1.default.createElement(ErrorRight, null, react_1.default.createElement(H1, null, \"No Mic Permission\"), react_1.default.createElement(P, null, \"To use the voice interface, please allow your web browser access the microphone and reload.\"), react_1.default.createElement(P, null, react_1.default.createElement(A, {\n    href: \"https://docs.speechly.com/faq/#why-do-i-get-mic-consent-denied-error-in-the-playground-why-doesnt-my-microphone-work-in-the-playground\"\n  }, \"Troubleshooting\"), \"\\u00A0\\u00A0\\u00A0\\u00A0\", react_1.default.createElement(A, {\n    href: window.location.href\n  }, \"Reload\"))), visible === react_client_1.SpeechState.NoBrowserSupport && react_1.default.createElement(ErrorRight, null, react_1.default.createElement(H1, null, \"Unsupported Browser\"), react_1.default.createElement(P, null, \"To use the voice interface, please visit this site using a supported browser.\"), react_1.default.createElement(P, null, react_1.default.createElement(A, {\n    href: \"https://docs.speechly.com/faq/#the-microphone-doesnt-work-on-ios-and-mobile-safari\"\n  }, \"Troubleshooting\"))), visible === HttpsRequired && react_1.default.createElement(ErrorRight, null, react_1.default.createElement(H1, null, \"HTTPS Required\"), react_1.default.createElement(P, null, \"To use the voice interface, please visit this site using the secure https:// protocol.\"), react_1.default.createElement(P, null, react_1.default.createElement(A, {\n    href: \"https://docs.speechly.com/faq/#http-unsupported\"\n  }, \"Troubleshooting\"), \"\\u00A0\\u00A0\\u00A0\\u00A0\", react_1.default.createElement(A, {\n    href: window.location.href.replace(/^http(?!s)/, 'https')\n  }, \"Try with HTTPS\"))));\n};\n\nexports.ErrorPanel = ErrorPanel;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;","map":{"version":3,"mappings":"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","names":["ErrorDiv","styled_components_1","div","templateObject_1","ErrorLeft","templateObject_2","ErrorRight","templateObject_3","H1","h1","templateObject_4","P","p","templateObject_5","A","a","templateObject_6","HttpsRequired","isLocalHost","hostname","match","ErrorPanel","props","react_1","visible","setVisible","subTangentClick","pubsub_js_1","subscribe","types_1","TangentRelease","message","payload","state","react_client_1","NoAudioConsent","NoBrowserSupport","location","_a","protocol","window","unsubscribe","onClick","href","replace","exports"],"sources":["../../src/components/ErrorPanel.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}